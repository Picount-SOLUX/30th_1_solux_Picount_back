version: '3.8'

services:
  springboot-blue:
    image: nimesss/picount-prac:latest
    container_name: springboot-blue
    ports:
      - "8081:8080"
    env_file:
      - .env
    environment:
      - TZ=Asia/Seoul
    networks:
      - app-network
    restart: unless-stopped

  springboot-green:
    image: nimesss/picount-prac:latest
    container_name: springboot-green
    ports:
      - "8082:8080"
    env_file:
      - .env
    environment:
      - TZ=Asia/Seoul
    networks:
      - app-network
    restart: unless-stopped

  sonarqube:
    image: sonarqube:latest
    container_name: sonarqube
    ports:
      - "9000:9000"
    networks:
      - app-network
    restart: unless-stopped
    volumes:
      - sonarqube_data:/opt/sonarqube/data
      - sonarqube_extensions:/opt/sonarqube/extensions
      - sonarqube_logs:/opt/sonarqube/logs
volumes:
  sonarqube_data:
  sonarqube_extensions:
  sonarqube_logs:

#  jenkins:
#    image: jenkins/jenkins:jdk17
#    container_name: jenkins
#    ports:
#      - "9090:8080"
#      - "50000:50000"
#    volumes:
#      - ~/jenkins:/var/jenkins_home
#      - /var/run/docker.sock:/var/run/docker.sock
#    user: root
#    networks:
#      - app-network
#    restart: unless-stopped

networks:
  app-network:
    driver: bridge